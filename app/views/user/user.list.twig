{% extends 'default.twig' %}
{% block content %}
    <div class="row">
        <div id="breadcrumb" class="col-md-12">
            <ol class="breadcrumb">
                <li>
                    <a href="#">Users</a>
                </li>                
            </ol>
        </div>
    </div>
    <div class="row">
        <div class="col-md-offset-10 col-md-2">
            <a href="{{ path_for('signup') }}" class="btn btn-classic">new User</a>            
        </div>
    </div>
    <div class="box-content">
        <h4 class="page-header">User list</h4>
        <table class="table table-bordered table-striped table-hover table-heading table-datatable" id="usertable">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Login</th>
                </tr>
            </thead>
        </table>
    </div>
{% endblock %}

{% block script %}
    <script src="{{base_url()}}/app/template/plugins/datatables/dataTables.js"></script>
    <script src="{{base_url()}}/app/template/plugins/datatables/dataTables.bootstrap.js"></script>

    <script type="text/javascript">
        $(function() {

            $('#usertable').DataTable({                
                "serverSide": true,
                "bFilter": false,
                "ajax": {
                    "url": "user/list",
                    "type": "POST"
                },
                "columns": [
                    {
                        "data": "id"
                    }, {
                        "data": "name"
                    }, {
                        "data": "email"
                    }, {
                        "data": "login"
                    }
                ]
            });

        });
    </script>

    {% if errors %}
        <script type="text/javascript">
            $(function() {
                //$('#modal-validation-errors').modal('show');
            });
        </script>
    {% endif %}

{% endblock %}
