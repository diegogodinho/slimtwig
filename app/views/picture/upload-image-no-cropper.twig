{% extends 'default.twig' %}
{% block content %}  

<style>
img {
  max-width: 100%; /* This rule is very important, please do not ignore this! */
}
</style> 
<div class="row">
        <div id="breadcrumb" class="col-md-12">
            <ol class="breadcrumb">
                <li>
                    <a href="#">Upload Image</a>
                </li>
            </ol>
        </div>
    </div>
<div class="row">
    <div class="box-content">
        <form action="/Images/SavePicture" method="post" enctype="multipart/form-data" id="formUploadImagem">    
            <div class="row">
                <div class="col-md-6">
                        <!-- <h3>Demo:</h3> -->
                    <div class="img-container">
                        <img id="imgprincipal" src="uploads/imagetest.jpg" width="700" height="400" alt="Picture">
                    </div>
                </div>                
                 <label class="btn btn-primary btn-upload" for="inputImage" title="Upload image file" style="margin-top: 10px">
        <input type="file" class="sr-only" id="inputImage" name="file"  accept="image/*">
        <span class="docs-tooltip" data-toggle="tooltip" title="" data-original-title="Import image with Blob URLs">
            <span class="fa fa-upload"></span>&nbsp;Upload
        </span>
    </label>	    
            </div>                
        </form>
    </div>
</div>
<div class="input-group">
   
</div>

{% endblock %}

{% block script %}  
<script type="text/javascript">
    $(function() {        

        var URL = window.URL || window.webkitURL;        

        var blobURL;

        var $image = $('#imgprincipal');       

        {# var options = {
            toggleDragModeOnDblclick: false,
            cropBoxResizable: false,
            movable: true,
            rotatable: false,
            scalable: false,
            zoomable: true,
            zoomOnTouch: false,
            zoomOnWheel: true,
            aspectRatio: 16 / 9,
            dragMode: 'move',
            preview: '.img-preview',
            cropBoxResizable: false,
            crop: function (data) {                
                $('#EixoX').val(Math.round(data.x));
                $('#EixoY').val(Math.round(data.y));
                $('#Altura').val(Math.round(data.height));
                $('#Largura').val(Math.round(data.width));
            },            
            ready:function(){                                
            }
        };      


        $image.cropper('destroy').cropper(options);         #}
        

        $('#inputImage').change(function(){            
            //$('#inputImage').val('');
            if (URL) {                
                var files = this.files;
                //if (!$image.data('cropper')) {
                    //return;
                //}

                if (files && files.length) {
                    file = files[0];

                    if (/^image\/\w+$/.test(file.type)) {                        
                        blobURL = URL.createObjectURL(file);
                        //$('#modalCropper').modal('show'); 
                        //$image.cropper('destroy').attr('src', blobURL).cropper(options);
                        
                        $('#imgprincipal').attr('src', blobURL);
                    } else {
                        window.alert('Please choose an image file.');
                    }
                }
                
            } 
            else {
                $('#inputImage').prop('disabled', true).parent().addClass('disabled');
            }

        });

        $('#modalCropper').on('shown.bs.modal', function (e) {            
            $image.cropper('destroy').attr('src', blobURL).cropper(options);
            $('#inputImage').val('');
        });

    });
</script>
  

{% endblock %}

